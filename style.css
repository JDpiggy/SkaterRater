/* --- Global Styles & Font --- */
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: 'Orbitron', sans-serif;
    background-color: #0a0a1f;
    color: #d0d0ff;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 20px; /* Add padding around container */
    overflow: hidden; /* Prevents scrollbars from minor animation overflows */
    position: relative;
}

/* --- Background Animation (No change) --- */
#background-animation-container { /* ... same ... */ }
.bg-star { /* ... same ... */ }
@keyframes fallAndTwinkle { /* ... same ... */ }


/* --- Main Container RESHAPED --- */
.container {
    background: rgba(20, 20, 50, 0.88); /* Slightly more opaque */
    backdrop-filter: blur(10px); /* Increased blur */
    padding: 25px 30px;
    border-radius: 30px; /* More rounded */
    border: 2px solid rgba(100, 100, 200, 0.6);
    box-shadow: 0 0 50px rgba(120, 120, 255, 0.35), inset 0 0 25px rgba(0,0,0,0.45);
    width: 95%;
    max-width: 1300px; /* SIGNIFICANTLY WIDER */
    min-height: 650px; /* Ensure a minimum height */
    max-height: 90vh;  /* Max height relative to viewport */
    display: flex;
    flex-direction: column;
    gap: 20px;
    position: relative;
    z-index: 1;
    overflow-y: auto; /* Allow scroll within container if content exceeds max-height */
}

header { text-align: center; flex-shrink: 0; /* Prevent header from shrinking */ }
h1 {
    color: #82aaff;
    text-shadow: 0 0 8px #82aaff, 0 0 16px #82aaff, 0 0 2px #fff;
    margin-bottom: 15px;
    font-size: 2.6em;
    letter-spacing: 1px;
}

.stats-display { /* ... same ... */ }
.stats-display p { /* ... same ... */ }
.stats-display span[id] { /* ... same ... */ }
.icon-shape.stardust-icon { /* ... same ... */ }


/* --- Game Content Wrapper (No major change, relies on container width) --- */
.game-content-wrapper {
    display: flex;
    flex-direction: row;
    gap: 30px; /* Slightly increased gap */
    width: 100%;
    flex-grow: 1; /* Allow this wrapper to take available vertical space */
    overflow: hidden; /* Prevent internal scroll issues */
}

main {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center; /* Center the click area vertically */
    gap: 15px;
    min-width: 300px; /* Increased min-width */
    padding: 10px; /* Add some padding */
}
.click-area {
    position: relative;
    width: 200px; height: 200px; /* Slightly larger click area */
    display: flex; justify-content: center; align-items: center;
    margin-bottom: 10px;
}
#click-target { /* Blob will change via JS now */
    width: 180px; height: 180px; /* Slightly larger blob */
    /* Initial background set in JS or as a fallback */
    background: radial-gradient(circle, #c89aff 0%, #9370db 60%, #6a0dad 100%);
    border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
    cursor: pointer;
    transition: transform 0.1s ease, box-shadow 0.2s ease, border-radius 0.3s ease, background 0.3s ease; /* Added background transition */
    box-shadow: 0 0 25px #9370db, 0 0 40px #9370db, inset 0 0 18px rgba(255,220,255,0.4);
    animation: pulseBlob 5s infinite ease-in-out;
}
/* Keyframes pulseBlob, click-target:hover, :active (No change) */
@keyframes pulseBlob { /* ... same ... */ }
#click-target:hover { /* ... same ... */ }
#click-target:active { /* ... same ... */ }

#click-feedback-container { /* ... same ... */ }
.click-spark { /* ... same ... */ }
@keyframes shootSpark { /* ... same ... */ }
.click-text-feedback { /* ... same ... */ }
@keyframes fadeUpText { /* ... same ... */ }

#stardust-particle-flow-container {
    position: absolute;
    bottom: 60px; /* Adjust if footer size changes */
    left: 0; right: 0; /* Span full width of .container */
    margin: 0 auto; /* Center it */
    width: 90%; height: 150px;
    pointer-events: none;
    z-index: 5;
}
.stardust-particle { /* ... same ... */ }

/* --- Upgrades & Generators Panel --- */
.upgrades-panel {
    flex: 2;
    display: flex; /* Use flex for sections */
    flex-direction: column; /* Stack sections vertically */
    gap: 20px;
    background: rgba(30, 30, 70, 0.4);
    padding: 20px;
    border-radius: 15px;
    min-width: 350px; /* Increased min-width */
    overflow-y: auto; /* Allow scroll within this panel if it has too many items */
    max-height: calc(100% - 20px); /* Ensure it fits within game-content-wrapper */
}

@media (max-width: 900px) { /* Adjusted breakpoint for stacking */
    .game-content-wrapper { flex-direction: column; }
    main { width: 100%; justify-content: flex-start; /* Align top when stacked */ }
    .upgrades-panel { width: 100%; max-height: none; /* Allow full height when stacked */ }
    .click-area { width: 180px; height: 180px; } /* Can revert to smaller if needed */
    #click-target { width: 150px; height: 150px; }
}

.upgrades-section, .generators-section {
    padding: 15px;
    border: 1px solid rgba(80, 80, 150, 0.5);
    border-radius: 10px;
    background: rgba(25,25,60,0.5);
    display: flex;
    flex-direction: column;
}
.upgrades-section h2, .generators-section h2 { /* ... same ... */ }
.icon-shape { /* ... same ... */ }
.section-icon { /* ... same ... */ }
.upgrade-sec-icon { /* ... same ... */ }
.generator-sec-icon { /* ... same ... */ }

.item-icon { width: 18px; height: 18px; margin-right: 10px; } /* Slightly larger */
.click-power-icon { /* ... same ... */ }
.drone-icon { /* ... same ... */ }
.collector-icon { /* ... same ... */ }
/* New Icons */
.synergy-icon {
    background-color: #f7ff89; /* Light yellow */
    clip-path: polygon(50% 0%, 75% 25%, 75% 75%, 50% 100%, 25% 75%, 25% 25%); /* Upward Arrow-like Hex */
}
.crit-icon {
    background-color: #ff8989; /* Light red */
    width: 20px; height: 20px;
    clip-path: polygon(50% 0%, 61.8% 38.2%, 100% 38.2%, 69.1% 61.8%, 80.9% 100%, 50% 76.4%, 19.1% 100%, 30.9% 61.8%, 0% 38.2%, 38.2% 38.2%); /* Explosion/Star burst */
}


.upgrade-controls, .generator-controls { /* ... same ... */ }
.upgrade, .generator { /* ... same ... */ }
.upgrade:hover, .generator:hover { /* ... same ... */ }
.upgrade h3, .generator h3 { /* ... same ... */ }
.upgrade p, .generator p { /* ... same ... */ }

#generator-fleet-display { /* ... same ... */ }
.visual-generator-icon { /* ... same ... */ }
.visual-gen1 { /* ... same ... */ }
.visual-gen2 { /* ... same ... */ }
@keyframes popIn { /* ... same ... */ }

button { /* ... same ... */ }
button:hover:not(:disabled) { /* ... same ... */ }
button:active:not(:disabled) { /* ... same ... */ }
button:disabled { /* ... same ... */ }

footer { /* ... same ... */ flex-shrink: 0; /* Prevent footer from shrinking */ }
footer button { /* ... same ... */ }
/* ... other footer button styles ... */
#save-status { /* ... same ... */ }
